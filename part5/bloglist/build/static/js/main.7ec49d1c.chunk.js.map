{"version":3,"sources":["components/Blog.js","components/BlogForm.js","components/Togglable.js","components/LoginForm.js","components/Notification.js","services/blogs.js","services/login.js","components/Footer.js","App.js","index.js"],"names":["Blog","blog","toggleImportance","label","important","className","content","onClick","BlogForm","createBlog","useState","newBlogTitle","setNewBlogTitle","newBlogAuthor","setNewBlogAuthor","newBlogURL","setNewBlogURL","onSubmit","event","preventDefault","title","author","url","likes","id","value","onChange","target","type","Togglable","React","forwardRef","props","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","buttonLabel","children","displayName","LoginForm","handleSubmit","handleUsernameChange","handlePasswordChange","username","password","Notification","message","baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","update","put","setToken","newToken","login","credentials","Footer","color","fontStyle","fontSize","App","blogs","setBlogs","Message","setMessage","messageType","setMessageType","setUsername","setPassword","user","setUser","blogFormRef","createRef","useEffect","blogService","initialblogs","sort","b","loggedUserJSON","window","localStorage","getItem","JSON","parse","addBlog","blogObject","current","returnedBlog","concat","setTimeout","addLike","find","n","changedBlog","map","deleteBlog","blogToDelete","element","confirm","remove","splice","findIndex","handleLogin","loginService","setItem","stringify","name","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7ec49d1c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Blog = ({ blog, toggleImportance }) => {\r\n  const label = blog.important\r\n    ? 'make not important' : 'make important'\r\n\r\n  return (\r\n    <li className='blog'>\r\n      <span>{blog.content}</span> \r\n      <button onClick={toggleImportance}>{label}</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Blog\r\n","import React, { useState } from 'react'\r\n\r\nconst BlogForm = ({ createBlog }) => {\r\n\tconst [newBlogTitle,    setNewBlogTitle]    = useState('')\r\n\tconst [newBlogAuthor,   setNewBlogAuthor]   = useState('')\r\n\tconst [newBlogURL,      setNewBlogURL]      = useState('')\r\n\r\n\r\n\tconst handleBlogTitleChange = (event) => {\r\n\t\tsetNewBlogTitle(event.target.value)\r\n\t}\r\n\tconst handleBlogAuthorChange = (event) => {\r\n\t\tsetNewBlogAuthor(event.target.value)\r\n\t}\r\n\tconst handleBlogURLChange = (event) => {\r\n\t\tsetNewBlogURL(event.target.value)\r\n\t}\r\n\r\n\tconst addBlog = (event) => {\r\n\t\tevent.preventDefault()\r\n\t\tconst blogObject = {\r\n      \t\timportant: false,\r\n\t\t\ttitle:  newBlogTitle,\r\n\t\t\tauthor: newBlogAuthor,\r\n\t\t\turl:    newBlogURL,\r\n\t\t\tlikes:  0,\r\n\t\t}\r\n\r\n\t\tcreateBlog(blogObject)\r\n\r\n\t\tsetNewBlogTitle('')\r\n\t\tsetNewBlogAuthor('')\r\n\t\tsetNewBlogURL('')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"BlogForm\">\r\n\t\t\t<h2>Create a new Blog</h2>\r\n\t\t\t<form onSubmit={addBlog}>\r\n                Title:  <input id='input-title'     value={newBlogTitle}     onChange={handleBlogTitleChange}/><br />\r\n                Author: <input id='input-author'    value={newBlogAuthor}    onChange={handleBlogAuthorChange}/><br />\r\n                URL:    <input id='input-URL'       value={newBlogURL}       onChange={handleBlogURLChange}/><br />\r\n\t\t\t\t<button id=\"blog-submit\" type=\"submit\">save</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default BlogForm\r\n","import React, { useState, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible} className=\"togglableContent\">\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.displayName = 'Togglable'\r\nTogglable.propTypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Togglable","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nconst LoginForm = ({\r\n   handleSubmit,\r\n   handleUsernameChange,\r\n   handlePasswordChange,\r\n   username,\r\n   password\r\n\r\n  \r\n  }) => {\r\n\r\n    LoginForm.propTypes = {\r\n      handleSubmit: PropTypes.func.isRequired,\r\n      handleUsernameChange: PropTypes.func.isRequired,\r\n      handlePasswordChange: PropTypes.func.isRequired,\r\n      username: PropTypes.string.isRequired,\r\n      password: PropTypes.string.isRequired\r\n    }\r\n    \r\n\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          username\r\n          <input id='username'\r\n            value={username}\r\n            onChange={handleUsernameChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          password\r\n          <input id='password'\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n          />\r\n      </div>\r\n      <button id=\"login-button\" type=\"submit\">\r\n          login\r\n        </button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const response = await axios.post(baseUrl, newObject, config)\r\n  return response.data\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getAll, create, update, setToken }\r\n","  \r\nimport axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { login }","import React from 'react'\r\n\r\nconst Footer = () => {\r\n  const footerStyle = {\r\n    color: 'green',\r\n    fontStyle: 'italic',\r\n    fontSize: 16\r\n  }\r\n\r\n  return (\r\n    <div style={footerStyle}>\r\n      <br />\r\n      <em>Blog app, Department of Computer Science, University of Helsinki 2020</em>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React, { useState, useEffect } from 'react'\r\nimport Blog         from './components/Blog'\r\nimport BlogForm     from './components/BlogForm'\r\nimport Togglable    from './components/Togglable'\r\nimport LoginForm    from './components/LoginForm'\r\nimport Notification from './components/Notification'\r\nimport blogService  from './services/blogs'\r\nimport loginService from './services/login'\r\nimport Footer       from './components/Footer'\r\n\r\n\r\n\r\nconst App = () => {\r\n\tconst [blogs, setBlogs] = useState([])\r\n\tconst [Message,         setMessage]         = useState(null)\r\n\tconst [messageType,     setMessageType ]\t= useState('micha test logged in')\r\n\tconst [username, setUsername] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst [user, setUser] = useState(null)\r\n\r\n\tconst blogFormRef = React.createRef()\r\n\r\n\tuseEffect(() => {\r\n\t\tblogService\r\n\t\t\t.getAll()\r\n\t\t\t.then(initialblogs => {\r\n\t\t\t\tinitialblogs.sort((a, b) => b.likes - a.likes)\r\n\t\t\t\tsetBlogs(initialblogs)\r\n\t\t\t})\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\t// eslint-disable-next-line no-undef\r\n\t\tconst loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser')\r\n\t\tif (loggedUserJSON) {\r\n\t\t\tconst user = JSON.parse(loggedUserJSON)\r\n\t\t\tsetUser(user)\r\n\t\t\tblogService.setToken(user.token)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst addBlog = async (blogObject) => {\r\n\t\tblogFormRef.current.toggleVisibility()\r\n\r\n\t\ttry {\r\n\t\t\tconst returnedBlog = await blogService.create(blogObject)\r\n\r\n\t\t\tsetBlogs(blogs.concat(returnedBlog))\r\n\r\n\t\t\tsetMessageType('success')\r\n\t\t\tsetMessage(`a new blog ${blogObject.title} by ${blogObject.author} added`)\r\n\t\t\tsetTimeout(() => { setMessage(null) }, 5000)\r\n\t\t} catch(exception) {\r\n\t\t\tsetMessageType('error')\r\n\t\t\tsetMessage('something went wrong')\r\n\t\t\tsetTimeout(() => { setMessage(null) }, 5000)\r\n\t\t}\r\n\t}\r\n\r\n\tconst addLike = async (id) => {\r\n\t\tconst blog = blogs.find(n => n.id === id)\r\n\t\tconst changedBlog = { ...blog, likes: blog.likes+1 }\r\n\r\n\t\ttry {\r\n\t\t\tconst returnedBlog = await blogService.update(id, changedBlog)\r\n\r\n\t\t\tsetBlogs(blogs.map(blog => (blog.id !== id) ? blog : returnedBlog))\r\n\r\n\t\t\tsetMessageType('success')\r\n\t\t\tsetMessage(`you liked ${returnedBlog.title} by ${returnedBlog.author}`)\r\n\t\t\tsetTimeout(() => { setMessage(null) }, 5000)\r\n\t\t} catch(exception) {\r\n\t\t\tsetMessageType('error')\r\n\t\t\tsetMessage('something went wrong')\r\n\t\t\tsetTimeout(() => { setMessage(null) }, 5000)\r\n\t\t}\r\n\t}\r\n\r\n\tconst deleteBlog = async (id) => {\r\n\t\tconst blogToDelete = blogs.find(element => element.id === id)\r\n\r\n\t\t// eslint-disable-next-line no-undef\r\n\t\tif (!window.confirm(`Delete ${blogToDelete.title} by ${blogToDelete.author}?`))\r\n\t\t\treturn\r\n\t\ttry {\r\n\t\t\tawait blogService.remove(id)\r\n\r\n\t\t\tblogs.splice(blogs.findIndex(element => element.id === id), 1)\r\n\r\n\t\t\tsetMessageType('success')\r\n\t\t\tsetMessage('blog deleted')\r\n\t\t\tsetTimeout(() => { setMessage(null) }, 5000)\r\n\t\t} catch(exception) {\r\n\t\t\tsetMessageType('error')\r\n\t\t\tsetMessage('something went wrong')\r\n\t\t\tsetTimeout(() => { setMessage(null) }, 5000)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleLogin = async (event) => {\r\n\t\tevent.preventDefault()\r\n\t\ttry {\r\n\t\t\tconst user = await loginService.login({ username, password, })\r\n\r\n\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\twindow.localStorage.setItem(\r\n\t\t\t\t'loggedBlogAppUser', JSON.stringify(user)\r\n\t\t\t)\r\n\r\n\t\t\tblogService.setToken(user.token)\r\n\t\t\tsetUser(user)\r\n\t\t\tsetUsername('')\r\n\t\t\tsetPassword('')\r\n\t\t} catch (exception) {\r\n\t\t\tsetMessageType('error')\r\n\t\t\tsetMessage('wrong credentials')\r\n\t\t\tsetTimeout(() => { setMessage(null) }, 5000)\r\n\t\t}\r\n\t}\r\n\r\n\tconst loginForm = () => (\r\n\t\t<Togglable buttonLabel='login'>\r\n\t\t\t<LoginForm\r\n\t\t\t\tusername={username}\r\n\t\t\t\tpassword={password}\r\n\t\t\t\thandleUsernameChange={({ target }) => setUsername(target.value)}\r\n\t\t\t\thandlePasswordChange={({ target }) => setPassword(target.value)}\r\n\t\t\t\thandleSubmit={handleLogin}\r\n\t\t\t/>\r\n\t\t</Togglable>\r\n\t)\r\n\r\n\tconst blogForm = () => (\r\n\t\t<Togglable buttonLabel='new BLOG' ref={blogFormRef}>\r\n\t\t\t<BlogForm createBlog={addBlog}/>\r\n\t\t</Togglable>\r\n\t)\r\n\r\n\tconst logout = () => {\r\n\t\t// eslint-disable-next-line no-undef\r\n\t\twindow.localStorage.removeItem('loggedBlogAppUser')\r\n\t\tsetUser(null)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h2>Blogs</h2>\r\n\t\t\t<Notification message={Message} messageType = {messageType}/>\r\n\t\t\t{(user === null)? loginForm() :\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<p>{user.name} logged in <button id=\"logout-button\" onClick={logout}>Log Out</button></p>\r\n\t\t\t\t\t{blogForm()}\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t{blogs.map(blog => <Blog key={blog.id} blog={blog}\r\n\t\t\t\t\t\taddLike = {() => addLike(blog.id)}\r\n\t\t\t\t\t\tdeleteBlog = {() => deleteBlog(blog.id)}/>)}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t\t\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}